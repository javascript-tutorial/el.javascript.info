# Μετατροπές Τύπων

Τις περισσότερες φορές, οι τελεστές και οι συναρτήσεις μετατρέπουν αυτόματα, και στον σωστό τύπο, τις τιμές που δίνονται σε αυτές.

Για παράδειγμα, η `alert` μετατρέπει αυτόματα σε string οποιαδήποτε τιμή, ώστε να την εμφανίσει. Οι Μαθηματικές πράξεις μετατρέπουν τιμές σε νούμερα.

Υπάρχουν επίσης περιπτώσεις όπου χρειαζόμαστε να μετατρέψουμε ρητά μια τιμή στον προσδοκώμενο τύπο.

```smart header="Δεν μιλάμε ακόμα για αντικείμενα"
Σε αυτό το κεφάλαιο, δεν θα καλύψουμε την ύλη για τα αντικείμενα. Αντίθετα, θα μελετήσουμε πρώτα τις απλές τιμές. 

Αργότερα, όταν μάθουμε για τα αντικείμενα, θα δούμε πώς δουλεύει η μετατροπή των αντικειμένων στο κεφάλαιο <info:object-toprimitive>.

```

## Μετατροπή συμβολοσειρών

Η μετατροπή συμβολοσειρών γίνεται όταν χρειαζόμαστε μια τιμή σε μορφή συμβολοσειράς.

Για παράδειγμα, η `alert(value)` κάνει αυτή τη μετατροπή, ώστε να εμφανίσει την τιμή.

Μπορούμε επίσης να καλέσουμε τη συνάρτηση `String(value)`, για να μετατρέψουμε μια τιμή σε μια συμβολοσειρά:

```js run
let value = true;
alert(typeof value); // boolean

*!*
value = String(value); // τώρα η τιμή είναι η συμβολοσειρά "true"
alert(typeof value); // string
*/!*
```

Η μετατροπή συμβολοσειρών είναι αρκετά προφανής. Η `false` γίνεται `"false"`, η `null` γίνεται `"null"`, κλπ.

## Αριθμητική μετατροπή

Η μετατροπή αριθμών γίνεται αυτόματα σε Μαθηματικές συναρτήσεις και εκφράσεις.

Για παράδειγμα, όταν η διαίρεση `/` εφαρμόζεται σε μη αριθμούς:

```js run
alert("6" / "2"); // 3, οι συμβολοσειρές μετατρέπονται σε αριθμούς
```

Μπορούμε να χρησιμοποιήσουμε τη συνάρτηση `Number(value)` για τη ρητή μετατροπή της `value` σε έναν αριθμό:

```js run
let str = "123";
alert(typeof str); // string

let num = Number(str); // γίνεται ο αριθμός 123

alert(typeof num); // number
```

Η ρητή μετατροπή συνήθως απαιτείται όταν διαβάζουμε μια τιμή από μια πηγή με βάση τις συμβολοσειρές, όπως μια φόρμα κειμένου, αλλά περιμένουμε την εισαγωγή ενός αριθμού.

Εάν η συμβολοσειρά δεν περιέχει έναν έγκυρο αριθμό, τότε το αποτέλεσμα μιας τέτοιας μετατροπής είναι `NaN`. Για παράδειγμα:

```js run
let age = Number("μια αυθαίρετη συμβολοσειρά αντί ενός αριθμού");

alert(age); // NaN, η μετατροπή απέτυχε
```

Κανόνες αριθμητικών μετατροπών:

| Τιμή                                  | Γίνεται...                                                                                                                                                                                                                               |
| ------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `undefined`                           | `NaN`                                                                                                                                                                                                                                    |
| `null`                                | `0`                                                                                                                                                                                                                                      |
| <code>true&nbsp;και&nbsp;false</code> | `1` και `0`                                                                                                                                                                                                                              |
| `string`                              | Οι κενοί χαρακτήρες από την αρχή και το τέλος αφαιρούνται. Εάν το υπολοιπόμενο περιεχόμενο της συμβολοσειράς είναι άδειο, τότε το αποτέλεσμα είναι `0`. Διαφορετικά, ο αριθμός "διαβάζεται" από τη συμβολοσειρά. Ένα σφάλμα δίνει `NaN`. |

Παραδείγματα:

```js run
alert(Number("   123   ")); // 123
alert(Number("123ω")); // NaN (σφάλμα όταν προσπαθεί να διαβάσει αριθμό στο "ω")
alert(Number(true)); // 1
alert(Number(false)); // 0
```

Παρακαλώ προσέξτε ότι οι τιμές `null` και `undefined` συμπεριφέρονται διαφορετικά εδώ: η `null` γίνεται 0 (μηδέν), ενώ η `undefined` γίνεται `NaN`.


````smart header="Ο τελεστής '+' συνενώνει συμβολοσειρές"
Σχεδόν όλες οι Μαθηματικές πράξεις μετατρέπουν τιμές σε αριθμούς. Μια ξεχωριστή εξαίρεση είναι ο τελεστής `+`. Έαν μία από τις προστιθέμενες τιμές είναι μια συμβολοσειρά, τότε και η άλλη μετατρέπεται σε συμβολοσειρά.

Τότε, τις συνενώνει:

```js run
alert( 1 + '2' ); // '12' (συμβολοσειρά στα δεξιά)
alert( '1' + 2 ); // '12' (συμβολοσειρά στα αριστερά)
```

Αυτό συμβαίνει μόνο όταν τουλάχιστον μία από τις παραμέτρους είναι μια συμβολοσειρά. Διαφορετικά, οι τιμές μετατρέπονται σε αριθμούς.
````

## Boolean μετατροπή

Η μετατροπή αληθοτιμών είναι η πιο απλή.

Γίνεται σε λογικές πράξεις (αργότερα θα συναντήσουμε ελέγχους συνθηκών και άλλα παρόμοια), αλλά μπορεί επίσης να γίνει ρητά με μια κλήση της `Boolean(value)`.

Ο κανόνας μετατροπής:

- Τιμές που είναι διαισθητικά "άδειες", όπως το `0`, μια άδεια συμβολοσειρά, η `null`, η `undefined`, και η `NaN`, γίνονται `false`.
- Άλλες τιμές γίνονται `true`.

Για παράδειγμα:

```js run
alert(Boolean(1)); // true
alert(Boolean(0)); // false

alert(Boolean("γεια")); // true
alert(Boolean("")); // false
```
````

## Περίληψη

Οι τρεις πιο διαδεδομένα χρησιμοποιούμενες μετατροπές τύπων, είναι: σε συμβολοσειρά, σε αριθμό, και σε αληθοτιμή.

**`Boolean μετατροπή`** -- Γίνεται όταν κάτι το δίνουμε ως έξοδο. Μπορεί να εφαρμοστεί με τη `String(value)`. Η μετατροπή σε συμβολοσειρά είναι συνήθως προφανής για τις απλές τιμές.

**`Boolean μετατροπή`** -- Γίνεται στις Μαθηματικές πράξεις. Μπορεί να εφαρμοστεί με τη `Number(value)`.

Η μετατροπή ακολουθεί τους κανόνες:

| Τιμή |  Γίνεται... |
|-------|-------------|
|`undefined`|`NaN`|
|`null`|`0`|
|<code>true&nbsp;/&nbsp;false</code> | `1 / 0` |
| `string` | Η συμβολοσειρά διαβάζεται "όπως είναι", τα κενά και από τις δύο πλευρές αγνοούνται. Μια άδεια συμβολοσειρά γίνεται `0`. Ένα σφάλμα δίνει `NaN`. |


**`Boolean μετατροπή`** -- Γίνεται σε λογικές πράξεις. Μπορεί να εφαρμοστεί με τη `Boolean(value)`.

Ακολουθεί τους κανόνες:

| Τιμή |  Γίνεται ... |
|-------|-------------|
|`0`, `null`, `undefined`, `NaN`, `""` |`false`|
|κάθε άλλη τιμή| `true` |


Οι περισσότεροι από αυτούς τους κανόνες είναι εύκολοι να τους καταλάβεις και να τους θυμάσαι. Οι ξεχωριστές εξαιρέσεις που οι άνθρωποι συνήθως κάνουν λάθη, είναι:

- η `undefined` όταν θεωρείται σαν αριθμός, είναι `NaN` και όχι `0`.
- η `"0"` και οι συμβολοσειρές μόνο με κενά όπως `"   "`, είναι true ως αληθοτιμές.

Η ύλη για τα αντικείμενα δεν καλύπτεται εδώ. Θα επιστρέψουμε αργότερα σε αυτά στο κεφάλαιο <info:object-toprimitive>, το οποίο είναι αποκλειστικά αφιερωμένο στα αντικείμενα, δηλ. μετά που θα μάθουμε περισσότερες βασικές έννοιες για τη JavaScript.
